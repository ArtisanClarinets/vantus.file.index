<Page x:Class="Vantus.App.Pages.ModesPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:vm="clr-namespace:Vantus.App.ViewModels"
      mc:Ignorable="d"
      Title="Modes &amp; Presets">
    <ScrollViewer>
        <StackPanel Margin="24">
            <TextBlock Text="Modes &amp; Presets" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20" />
            
            <TextBlock Text="Choose a preset configuration to quickly apply recommended settings." Margin="0,0,0,20" />

            <TextBlock Text="Select Preset" Margin="0,0,0,5"/>
            <ComboBox ItemsSource="{Binding ViewModel.AvailablePresets}" SelectedItem="{Binding ViewModel.SelectedPreset, Mode=TwoWay}" Width="300" HorizontalAlignment="Left" Margin="0,0,0,20"/>

            <StackPanel Orientation="Horizontal">
                <Button Content="Preview Changes" Command="{Binding ViewModel.PreviewChangesCommand}" Margin="0,0,10,0" Padding="10,5"/>
                <Button Content="Apply Preset" Command="{Binding ViewModel.ApplyPresetCommand}" Padding="10,5"/>
            </StackPanel>
            
            <TextBlock Margin="0,20,0,10">
                <Run Text="Active Preset: " />
                <Run Text="{Binding ViewModel.ActivePreset, Mode=OneWay}" FontWeight="Bold" />
            </TextBlock>

            <ItemsControl ItemsSource="{Binding ViewModel.Diffs}">
                 <ItemsControl.ItemTemplate>
                     <DataTemplate DataType="{x:Type vm:DiffGroup}">
                          <StackPanel Margin="0,10">
                              <TextBlock Text="{Binding Page}" FontWeight="Bold" Margin="0,0,0,8"/>
                              <ItemsControl ItemsSource="{Binding Items}">
                                   <ItemsControl.ItemTemplate>
                                       <DataTemplate DataType="{x:Type vm:DiffItem}">
                                           <Grid Margin="0,4">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="2*"/>
                                                    <ColumnDefinition Width="1*"/>
                                                    <ColumnDefinition Width="1*"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Text="{Binding Label}" Grid.Column="0"/>
                                                <TextBlock Text="{Binding OldValue}" Grid.Column="1" Foreground="Red" Opacity="0.8"/>
                                                <TextBlock Text="{Binding NewValue}" Grid.Column="2" Foreground="Green" FontWeight="Bold"/>
                                           </Grid>
                                       </DataTemplate>
                                   </ItemsControl.ItemTemplate>
                              </ItemsControl>
                          </StackPanel>
                     </DataTemplate>
                 </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </ScrollViewer>
</Page>
