<Page x:Class="Vantus.App.Pages.ImportExportPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:vm="clr-namespace:Vantus.App.ViewModels"
      mc:Ignorable="d"
      Title="Import &amp; Export">
    <ScrollViewer>
        <StackPanel Margin="24">
            <TextBlock Text="Import &amp; Export" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20" />
            
            <TextBlock Text="Manage your settings by exporting them to a file or importing from an existing file." Margin="0,0,0,20" />

            <StackPanel Orientation="Horizontal">
                <Button Content="Export Settings" Command="{Binding ViewModel.ExportSettingsCommand}" Margin="0,0,10,0" Padding="10,5"/>
                <Button Content="Import Settings..." Command="{Binding ViewModel.ImportSettingsCommand}" Padding="10,5"/>
            </StackPanel>
            
            <TextBlock Text="{Binding ViewModel.StatusMessage}" Margin="0,10,0,0" />

            <!-- Import Preview -->
             <TextBlock Text="Import Preview" FontSize="18" FontWeight="SemiBold" Margin="0,20,0,10"/>

             <ItemsControl ItemsSource="{Binding ViewModel.ImportDiffs}">
                 <ItemsControl.ItemTemplate>
                     <DataTemplate DataType="{x:Type vm:DiffGroup}">
                          <StackPanel Margin="0,10">
                              <TextBlock Text="{Binding Page}" FontWeight="Bold" Margin="0,0,0,4"/>
                              <ItemsControl ItemsSource="{Binding Items}">
                                   <ItemsControl.ItemTemplate>
                                       <DataTemplate DataType="{x:Type vm:DiffItem}">
                                           <Grid Margin="0,2">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="2*"/>
                                                    <ColumnDefinition Width="1*"/>
                                                    <ColumnDefinition Width="1*"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Text="{Binding Label}" Grid.Column="0"/>
                                                <TextBlock Text="{Binding OldValue}" Grid.Column="1" Foreground="Red" Opacity="0.8"/>
                                                <TextBlock Text="{Binding NewValue}" Grid.Column="2" Foreground="Green" FontWeight="Bold"/>
                                           </Grid>
                                       </DataTemplate>
                                   </ItemsControl.ItemTemplate>
                              </ItemsControl>
                          </StackPanel>
                     </DataTemplate>
                 </ItemsControl.ItemTemplate>
             </ItemsControl>

             <Button Content="Confirm Import" Command="{Binding ViewModel.ApplyImportCommand}" Margin="0,10,0,0" Padding="10,5"/>
        </StackPanel>
    </ScrollViewer>
</Page>
